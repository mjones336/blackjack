(this["webpackJsonpblackjack-play"]=this["webpackJsonpblackjack-play"]||[]).push([[0],{13:function(e,t,a){e.exports=a(21)},18:function(e,t,a){},19:function(e,t,a){},20:function(e,t,a){},21:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),s=a(11),r=a.n(s),o=(a(18),a(1)),i=a(3),c=a(12),u=a(2),d=a(4),m=a(5),p=a(7),h=a(6),g=(a(19),a(20),0),y=0,f=0,v=null,b=null,E=null,N=null,S=null,C=null,B=null,w=void 0,P=void 0,x=function(e){Object(p.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(d.a)(this,a),(n=t.call(this,e)).game=function(){n.setState({tab:"game"}),document.getElementsByClassName("simulateTab")[0].classList.remove("active"),document.getElementsByClassName("gameTab")[0].classList.add("active")},n.simulate=function(){n.setState({tab:"simulate"}),document.getElementsByClassName("gameTab")[0].classList.remove("active"),document.getElementsByClassName("simulateTab")[0].classList.add("active")},n.state={tab:"game"},n}return Object(m.a)(a,[{key:"render",value:function(){var e=null;return"game"===this.state.tab?e=l.a.createElement(H,{simulate:this.simulate}):"simulate"===this.state.tab&&(e=l.a.createElement(O,{game:this.game})),l.a.createElement("div",{className:"App"},l.a.createElement("nav",{className:"navbar navbar-expand-md navbar-light bg-light border navigationBar"},l.a.createElement("a",{className:"navbar-brand",href:"/"},l.a.createElement("img",{src:"/twitter_header_photo_1.png",alt:"Blackjack-play logo",height:"70",width:"210"})," "),l.a.createElement("button",{"aria-controls":"navbar","aria-expanded":"false","aria-label":"Toggle navigation",className:"navbar-toggler","data-target":"#navbar","data-toggle":"collapse",type:"button"},l.a.createElement("span",{className:"navbar-toggler-icon"})),l.a.createElement("div",{className:"collapse navbar-collapse",id:"navbar"},l.a.createElement("ul",{className:"navbar-nav mr-auto mt-2"},l.a.createElement("li",{className:"gameTab nav-item active"},l.a.createElement("button",{className:"nav-link",onClick:this.game,style:{backgroundColor:"transparent",borderStyle:"none"}},l.a.createElement("b",null,l.a.createElement("h4",null,"\xa0 \xa0Play \xa0 \xa0")))),l.a.createElement("li",null,"   "),l.a.createElement("li",{className:"simulateTab nav-item"},l.a.createElement("button",{className:"nav-link",onClick:this.simulate,style:{backgroundColor:"transparent",borderStyle:"none"}},l.a.createElement("b",null,l.a.createElement("h4",null,"\xa0 \xa0 Monte Carlo Simulations \xa0 \xa0")))))),l.a.createElement("span",{className:"rightAlign"}," Created by Mark Jones.")),e)}}]),a}(l.a.Component),O=function(e){Object(p.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(d.a)(this,a),(n=t.call(this,e)).addThousandSep=function(e){var t=e.toString()+"d";return t=t.replace("000d",",000")},n.sliderUpdate=function(e){n.setState(Object(c.a)({},e.target.name,e.target.value))},n.startPySim=function(){var e=Object(u.a)(n);return e.setState({calculating:!0}),new Promise((function(t,a){console.log("START PYTHON SIMULATION: %Optimal= ".concat(e.state.percentOpt,", numHands= ").concat(e.state.numHands)),t(fetch("/simulate",{method:"POST",body:JSON.stringify({params:[e.state.percentOpt,e.state.numHands]})}))})).then((function(e){return e.text()})).then((function(e){return new Promise((function(t,a){console.log("Python POST response: ".concat(e)),t()}))})).then((function(){return new Promise((function(t,a){t(e.getUpdate())}))})).then((function(t){return new Promise((function(a,n){e.setState((function(e){return{calculating:!1,simResult:t,lastPercentOpt:e.percentOpt,lastNumHands:e.numHands}})),a(t)}))}))},n.getUpdate=function(){return new Promise((function(e,t){e(fetch("/simulationOutput"))})).then((function(e){return new Promise((function(t,a){t(e.json())}))}))},n.state={buttonBasePosn:["10%",250],percentOpt:90,numHands:1e4,calculating:!1,lastPercentOpt:"",lastNumHands:"",simResult:""},n}return Object(m.a)(a,[{key:"render",value:function(){var e=void 0;e=this.state.calculating?l.a.createElement("span",null,l.a.createElement("button",{type:"submit",class:"btn btn-primary",onClick:this.startPySim,style:{fontWeight:"bold",fontSize:"25px",borderStyle:"solid",borderColor:"black"},disabled:!0},"Run Simulations")," ",l.a.createElement("div",{className:"simInputText"}," \xa0 Calculating...")):l.a.createElement("span",null,l.a.createElement("button",{type:"submit",class:"btn btn-primary",onClick:this.startPySim,style:{fontWeight:"bold",fontSize:"25px",borderStyle:"solid",borderColor:"black"}},"Run Simulations")," ",l.a.createElement("div",{className:"simInputText"}," \xa0"));var t=void 0;return this.state.simResult&&(t=l.a.createElement("div",{className:"simResult"},l.a.createElement("b",{style:{fontWeight:"bold"}},"Simulations Completed"),l.a.createElement("hr",null),"Number of Hands Played: ",this.addThousandSep(this.state.lastNumHands),l.a.createElement("br",null),"Optimal Strategy Usage: ",this.state.lastPercentOpt,"%",l.a.createElement("br",null),"House Edge: ",this.state.simResult,"%")),l.a.createElement("div",{className:"simulateBg"},l.a.createElement("div",{className:"simulateDesc"},"The 'House Edge' is the expected return of the Dealer/Casino.",l.a.createElement("br",null),"The House Edge is between 0.5-1% in most Blackjack games played with optimal strategy - the exact value depends on the rules.",l.a.createElement("br",null),"Run simulations below to see the impact on the House Edge of playing a portion of moves sub-optimally."),l.a.createElement("div",{className:"inputFields",style:{position:"absolute",left:this.state.buttonBasePosn[0].toString(),top:this.state.buttonBasePosn[1].toString()+"px",width:313..toString()+"px"}},l.a.createElement("div",{className:"input-group mb-3 simInputButt"},l.a.createElement("div",{className:"input-group-prepend"},l.a.createElement("span",{className:"input-group-text",id:"inputGroup-sizing-default"},"Number of Hands to Play:")),l.a.createElement("input",{type:"text",className:"form-control","aria-label":"Default","aria-describedby":"inputGroup-sizing-default",value:this.addThousandSep(this.state.numHands),disabled:!0})),l.a.createElement("div",null,l.a.createElement("div",{className:"form-group input-group mb-3"},l.a.createElement("div",{className:"form-row form-group slidecontainer",style:{marginLeft:"5px",width:303..toString()+"px"}},l.a.createElement("input",{type:"range",name:"numHands",className:"form-control-range slider",id:"numHands",min:"1000",max:"50000",step:"1000",onChange:function(){},onInput:this.sliderUpdate,value:this.state.numHands})))),l.a.createElement("div",{className:"input-group mb-3 simInputButt"},l.a.createElement("div",{className:"input-group-prepend"},l.a.createElement("span",{className:"input-group-text",id:"inputGroup-sizing-default"},"Optimal Strategy Usage:")),l.a.createElement("input",{type:"number",className:"form-control","aria-label":"Default","aria-describedby":"inputGroup-sizing-default",value:this.state.percentOpt,disabled:!0}),l.a.createElement("div",{className:"input-group-append"},l.a.createElement("span",{className:"input-group-text"},"%"))),l.a.createElement("div",null,l.a.createElement("div",{className:"form-group input-group mb-3"},l.a.createElement("div",{className:"form-row form-group slidecontainer",style:{marginLeft:"5px",width:303..toString()+"px"}},l.a.createElement("input",{type:"range",name:"percentOpt",className:"form-control-range slider",id:"percentOpt",min:"0",max:"100",step:"1",onChange:function(){},onInput:this.sliderUpdate,value:this.state.percentOpt})))),e,l.a.createElement("div",{className:"simMethodology"},l.a.createElement("b",{style:{fontWeight:"bold"}},"Methodology"),l.a.createElement("br",null),"Sub-optimal decisions are randomly chosen from the remaining available legal moves after removing the optimal move.",l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("b",{style:{fontWeight:"bold"}},"Note"),l.a.createElement("br",null),"1mm+ simulations will produce more consistent results, but in order to reduce calculation times, isn't an option.")),t,l.a.createElement("footer",null,l.a.createElement("a",{style:{color:"white"},target:"_blank",rel:"noopener noreferrer",href:"https://www.freepik.com/free-photos-vectors/background"},"Background photo created by freepik - www.freepik.com")))}}]),a}(l.a.Component),H=function(e){Object(p.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(d.a)(this,a),(n=t.call(this,e)).componentWillMount=function(){n.playAgain("round")},n.talkToPython=function(e,t){var a=Object(u.a)(n);return new Promise((function(a,n){console.log("TALKTOPYTHON START ACTION: ".concat(e,", VALUE: ").concat(t)),a(fetch("/action",{method:"POST",body:JSON.stringify({action:[e,t]})}))})).then((function(e){return e.text()})).then((function(e){return new Promise((function(t,a){console.log(e),"OK"===e&&t(e)}))})).then((function(e){return new Promise((function(e,t){e()}))})).then((function(){return new Promise((function(n,l){console.log("TALKTOPYTHON END ACTION: ".concat(e,", VALUE: ").concat(t)),n(a.getUpdate())}))}))},n.getUpdate=function(){var e=Object(u.a)(n);return new Promise((function(e,t){e(fetch("/update"))})).then((function(e){return new Promise((function(t,a){t(e.json())}))})).then((function(t){return new Promise((function(a,n){for(P=t;e.deepEqual(P,w);)P=e.getUpdate();w=P,a(P)}))}))},n.deepEqual=function(e,t){var a=Object.keys,l=typeof e;return e&&t&&"object"===l&&l===typeof t?a(e).length===a(t).length&&a(e).every((function(a){return n.deepEqual(e[a],t[a])})):e===t},n.placeBet=function(e){var t=Object(u.a)(n);new Promise((function(a,n){E=e,t.setState((function(t){return{gameState:"play",prevBet:e,balance:Math.round(100*(t.balance-e+1e-5))/100}})),t.talkToPython("bet",e),a()})).then((function(){return new Promise((function(e,a){setTimeout((function(){t.deal()}),150),e()}))}))},n.deal=function(){var e=Object(u.a)(n);new Promise((function(t,a){console.log("deal"),t(e.talkToPython("deal",null))})).then((function(e){return new Promise((function(t,a){console.log("starthands ="),console.log(e),t(e)}))})).then((function(t){return new Promise((function(a,n){v=t.me[0].value[0],S=t.Dealer[0].value,e.setState({playerHand1:t.me[0].cards,dealerHand:t.Dealer[0].cards,gameState:"play",guide:"Choose to Hit, Stand, Double, or Split!"}),e.createCards("me"),e.createCards("dealer"),setTimeout((function(){e.whoseTurn()}),150),e.dealAnimation(2,"me",!1,!1),a()}))})).then((function(){return new Promise((function(t,a){e.dealAnimation(2,"dealer",!1,!1)}))}))},n.dealAnimation=function(e,t,a,s){var r=0,c=null,u=Object(i.a)(n.state.dealCards);if("me"===t?n.state.hasSplit?0===n.state.handNum?c="dealPlayer1":1===n.state.handNum&&(c="dealPlayer2"):c="dealPlayer":c="dealDealer",a){var d=l.a.createElement("div",{className:"cardBackImg",style:{animationName:"dealPlayer1",animationDelay:r.toString()+"s"}});u.push(d),r+=.15;var m=l.a.createElement("div",{className:"cardBackImg",style:{animationName:"dealPlayer2",animationDelay:r.toString()+"s"}});u.push(m),r+=.15}else{if(s){r++;var p,h=Object(o.a)(document.getElementsByClassName("dealerCards"));try{for(h.s();!(p=h.n()).done;){p.value.style.animationDelay="2s"}}catch(C){h.e(C)}finally{h.f()}}for(var g=0;g<e;g++){var y=l.a.createElement("div",{className:"cardBackImg",style:{animationName:c,animationDelay:r.toString()+"s"}});u.push(y),r+=.15}}if(n.setState({dealCards:u}),n.showCurrentCardsPerm(),"dealer"!==t||s)s&&(document.getElementsByClassName("dealerValue")[0].style.animationName="none",setTimeout((function(){document.getElementsByClassName("dealerValue")[0].style.animationName="show"}),1e3));else{var f,v=Object(o.a)(document.getElementsByClassName("dealerHole"));try{for(v.s();!(f=v.n()).done;){f.value.classList.add("cardsShown")}}catch(C){v.e(C)}finally{v.f()}var b,E=Object(o.a)(document.getElementsByClassName("dealerCards"));try{for(E.s();!(b=E.n()).done;){b.value.classList.add("cardsShown")}}catch(C){E.e(C)}finally{E.f()}var N,S=Object(o.a)(document.getElementsByClassName("dealerValue"));try{for(S.s();!(N=S.n()).done;){N.value.style.animationName="show"}}catch(C){S.e(C)}finally{S.f()}}},n.whoseTurn=function(e){console.log("START WHOSE TURN");var t=Object(u.a)(n);new Promise((function(e,a){e(t.talkToPython("whoseTurn",null))})).then((function(e){return new Promise((function(t,a){console.log("Turn ="),console.log(e),t(e)}))})).then((function(e){return new Promise((function(a,n){e.turn===t.state.turn&&e.hand_num===t.state.handNum||t.unhighlightHands(),t.unhighlightLegalMoves(),t.cleanShownCards(),a(e)}))})).then((function(e){return new Promise((function(a,n){a(t.setState({turn:e.turn,activeHand:e.hand,legalMoves:e.possible_moves,optimalMove:e.optimal_move,handNum:e.hand_num}))}))})).then((function(){return new Promise((function(e,a){t.highlightActiveHand(),t.highlightLegalMoves(),e()}))}))},n.whoseTurn1=function(){var e=Object(u.a)(n);new Promise((function(e,t){e({turn:"me",hand:{cards:[[9,"D"],["Q","H"]],value:[19,"hard"],stand:!1,bust:!1,allow_split:!1,allow_double:!1},possible_moves:["Hit","Stand"],optimal_move:"Stand",hand_num:0})})).then((function(e){return new Promise((function(t,a){console.log("Turn ="),console.log(e),t(e)}))})).then((function(t){return new Promise((function(a,n){t.turn!==e.state.turn||(t.hand_num,e.state.handNum),e.unhighlightHands(),e.unhighlightLegalMoves(),e.cleanShownCards(),a(t)}))})).then((function(t){return new Promise((function(a,n){e.setState({turn:t.turn,activeHand:t.hand,legalMoves:t.possible_moves,optimalMove:t.optimal_move,handNum:t.hand_num}),a()}))})).then((function(){e.highlightActiveHand(),e.highlightLegalMoves()}))},n.whoseTurn2=function(){var e=Object(u.a)(n);new Promise((function(e,t){e({turn:"me",hand:{cards:[[9,"D"],["2","D"]],value:[11,"hard"],stand:!1,bust:!1,allow_split:!1,allow_double:!1},possible_moves:["Hit","Stand"],optimal_move:"Hit",hand_num:1})})).then((function(e){return new Promise((function(t,a){console.log("Turn ="),console.log(e),t(e)}))})).then((function(t){return new Promise((function(a,n){t.turn!==e.state.turn||(t.hand_num,e.state.handNum),e.unhighlightHands(),e.unhighlightLegalMoves(),e.cleanShownCards(),a(t)}))})).then((function(t){return new Promise((function(a,n){e.setState({turn:t.turn,activeHand:t.hand,legalMoves:t.possible_moves,optimalMove:t.optimal_move,handNum:t.hand_num}),a()}))})).then((function(){e.highlightActiveHand(),e.highlightLegalMoves()}))},n.playMove=function(e){var t=Object(u.a)(n);new Promise((function(a,n){a(t.talkToPython("play",e))})).then((function(e){return new Promise((function(t,a){console.log("Play ="),console.log(e),t(e)}))})).then((function(a){return new Promise((function(n,l){!1===a.player_hand?(("Split"===e||"Double"===e)&&t.state.balance<t.state.prevBet?alert("Insufficient Balance to ".concat(e,"!")):alert("Illegal move"),l()):(v=a.player_hand.me[0].value[0],S=a.dealer_hand[0].value,E=a.bets[0],N=a.bets[1],t.setState({playerHand1:a.player_hand.me[0].cards,balance:a.balance,dealerHand:a.dealer_hand[0].cards}),2===a.player_hand.me.length&&(b=a.player_hand.me[1].value[0],t.setState({playerHand2:a.player_hand.me[1].cards,dealerHand:a.dealer_hand[0].cards}))),n(a)}))})).then((function(a){return new Promise((function(n,l){"Split"===e?(t.createCards("me","split"),t.setState({hasSplit:!0}),t.dealAnimation(2,"me",!0,!1),t.unhighlightHands()):"Hit"===e||"Double"===e?(t.createCards("me"),t.dealAnimation(1,"me",!1,!1),t.unhighlightHands()):"Stand"===e&&t.unhighlightHandsStand(),n(a)}))})).then((function(a){return new Promise((function(n,l){if(a.round_finished){S=a.dealer_hand[0].value[0],t.createCards("dealer");var s=a.dealer_hand[0].cards.length-2;s>0?(t.dealAnimation(s,"dealer",!1,!0),t.dispResults1s(a)):t.dispResultsNow(a)}else setTimeout((function(){"Split"===e?t.whoseTurn(!0):t.whoseTurn()}),150)}))}))},n.createCards=function(e,t){var a=0,s=null;if(t){var r=document.getElementsByClassName("splitCards");for(r[0].classList.add("slideL"),r[1].classList.add("slideR");r.length>0;)r[0].classList.remove("splitCards");for(var o=0,c=[document.getElementsByClassName("slideL")[0]];o<c.length;o++){var u=c[o];u.classList.remove("cardsShown"),u.style.animationIterationCount=1,u.style.animationName="slideLeft",u.style.left="610px",u.style.top="480px",u.style.visibility="visible"}for(var d=0,m=[document.getElementsByClassName("slideR")[0]];d<m.length;d++){var p=m[d];p.classList.remove("cardsShown"),p.style.animationIterationCount=1,p.style.animationName="slideRight",p.style.left="770px",p.style.top="480px",p.style.visibility="visible"}n.setState((function(e){return{playerBasePos:[610,480]}})),y=0,f=0}if("me"===e){if(0===n.state.handNum||t){a=n.state.playerHand1.length,s=Object(i.a)(n.state.playerHand1);var h=a-y;if(h>0)s.splice(-h,h).forEach((function(e,t){n.setState((function(t){var a=t.playerBasePos[0]+12*y,n=t.playerBasePos[1]+11*y,s=Object(i.a)(t.playerCards1),r=e[0].toString()+e[1].toString();s.push(l.a.createElement("div",{className:"hand1Cards splitCards cardBg",style:{visibility:"hidden",backgroundImage:"url('/playing_cards/"+r+".png')",height:"120px",width:"80px",position:"absolute",left:a.toString()+"px",top:n.toString()+"px"}}));var o=v<=21?v:"Bust";return{playerCards1:s,playerValue1:l.a.createElement("div",{className:"hand1 handValue",style:{visibility:"hidden",zIndex:1,position:"absolute",left:(t.playerBasePos[0]+parseInt("80")+12+10-7.5).toString()+"px",top:(t.playerBasePos[1]-10).toString()+"px"}},o),betHand1:l.a.createElement("div",{className:"hand1 handValue",style:{visibility:"hidden",zIndex:1,position:"absolute",left:(t.playerBasePos[0]+.35*parseInt("80")).toString()+"px",top:(t.playerBasePos[1]-10-25+7.5).toString()+"px"}},"$",E)}})),y++,C=l.a.createElement("div",{className:"cards hand1",style:{visibility:"hidden",height:(parseInt("120")+parseInt(11)*(y-1)+20).toString()+"px",width:(parseInt("80")+parseInt(12)*(y-1)+20).toString()+"px",position:"absolute",left:(n.state.playerBasePos[0]-10).toString()+"px",top:(n.state.playerBasePos[1]-10).toString()+"px"}})}))}if(1===n.state.handNum||t){a=n.state.playerHand2.length,s=Object(i.a)(n.state.playerHand2);var w=a-f;if(w>0)s.splice(-w,w).forEach((function(e,t){n.setState((function(t){var a=t.playerBasePos[0]+12*f+160,n=t.playerBasePos[1]+11*f,s=Object(i.a)(t.playerCards2),r=e[0].toString()+e[1].toString();s.push(l.a.createElement("div",{className:"hand2Cards cardBg",style:{visibility:"hidden",backgroundImage:"url('/playing_cards/"+r+".png')",height:"120px",width:"80px",position:"absolute",left:a.toString()+"px",top:n.toString()+"px"}}));var o=b<=21?b:"Bust";return{playerCards2:s,playerValue2:l.a.createElement("div",{className:"dispHand2 handValue hand2",style:{visibility:"hidden",zIndex:1,margin:0,padding:0,position:"absolute",left:(t.playerBasePos[0]+parseInt("80")+12+160+10-7.5).toString()+"px",top:(t.playerBasePos[1]-10).toString()+"px"}},o),betHand2:l.a.createElement("div",{className:"dispHand2 handValue hand2",style:{visibility:"hidden",zIndex:1,position:"absolute",left:(t.playerBasePos[0]+.37*parseInt("80")+160).toString()+"px",top:(t.playerBasePos[1]-10-25+7.5).toString()+"px"}},"$",N)}})),f++,B=l.a.createElement("div",{className:"cards hand2",style:{visibility:"hidden",height:(parseInt("120")+parseInt(11)*(y-1)+20).toString()+"px",width:(parseInt("80")+parseInt(12)*(y-1)+20).toString()+"px",position:"absolute",left:(n.state.playerBasePos[0]+160-10).toString()+"px",top:(n.state.playerBasePos[1]-10).toString()+"px"}})}))}}else if("dealer"===e){var P=Object(i.a)(n.state.dealerCards),x=null;if(!n.state.isDeal){var O=n.state.dealerHand[1],H=O[0].toString()+O[1].toString();P[0]=l.a.createElement("div",{className:"cardBg",style:{backgroundImage:"url('/playing_cards/"+H+".png')",height:"120px",width:"80px",position:"absolute",left:n.state.dealerBasePos[0].toString()+"px",top:n.state.dealerBasePos[1].toString()+"px"}});var k=S<=21?S:"Bust";x=l.a.createElement("div",{className:"dealerValue",style:{visibility:"hidden",position:"absolute",left:(n.state.dealerBasePos[0]+parseInt("80")+12+3).toString()+"px",top:(n.state.dealerBasePos[1]-3).toString()+"px"}},k)}var j=(a=n.state.dealerHand.length)-g;if(j>0){var T=(s=Object(i.a)(n.state.dealerHand)).splice(-j,j);n.state.isDeal&&(g=1,P.push(l.a.createElement("div",{className:"dealerCards cardBg",style:{visibility:"hidden",backgroundImage:"url('/playing_cards/card_back.png')",height:"120px",width:"80px",position:"absolute",left:n.state.dealerBasePos[0].toString()+"px",top:n.state.dealerBasePos[1].toString()+"px"}}))),T.forEach((function(e,t){var a=n.state.dealerBasePos[0]+12*g,s=n.state.dealerBasePos[1]+11*g,r=e[0].toString()+e[1].toString();P.push(l.a.createElement("div",{className:"dealerCards cardBg",style:{visibility:"hidden",backgroundImage:"url('/playing_cards/"+r+".png')",height:"120px",width:"80px",position:"absolute",left:a.toString()+"px",top:s.toString()+"px"}})),g++}));var I=S<=21?S:"Bust";x=l.a.createElement("div",{className:"dealerValue",style:{visibility:"hidden",position:"absolute",left:(n.state.dealerBasePos[0]+parseInt("80")+12+3).toString()+"px",top:(n.state.dealerBasePos[1]-3).toString()+"px"}},I)}n.setState({dealerCards:P,dealerValue:x,isDeal:!1})}},n.dispResults1s=function(e){var t,a=Object(o.a)(document.getElementsByClassName("hand1"));try{for(a.s();!(t=a.n()).done;){t.value.style.animationName="none"}}catch(c){a.e(c)}finally{a.f()}var l,s=Object(o.a)(document.getElementsByClassName("hand2"));try{for(s.s();!(l=s.n()).done;){l.value.style.animationName="none"}}catch(c){s.e(c)}finally{s.f()}var r,i=Object(o.a)(document.getElementsByClassName("dealerCards"));try{for(i.s();!(r=i.n()).done;){r.value.style.animationName="none"}}catch(c){i.e(c)}finally{i.f()}n.dispResultsNow(e)},n.dispResultsNow=function(e){var t,a=Object(o.a)(document.getElementsByClassName("hand1"));try{for(a.s();!(t=a.n()).done;){t.value.style.animationName="show"}}catch(u){a.e(u)}finally{a.f()}var l,s=Object(o.a)(document.getElementsByClassName("hand2"));try{for(s.s();!(l=s.n()).done;){l.value.style.animationName="show"}}catch(u){s.e(u)}finally{s.f()}var r,i=Object(o.a)(document.getElementsByClassName("dealerCards"));try{for(i.s();!(r=i.n()).done;){r.value.style.animationName="show"}}catch(u){i.e(u)}finally{i.f()}var c=e.balance;c>localStorage.getItem("highScore")&&localStorage.setItem("highScore",c),n.setState({gameState:"results",balance:e.balance,result:e.result,guide:""})},n.playAgain=function(e){"game"===e?(n.talkToPython("restartGame",null),n.setState({balance:100})):n.talkToPython("playAgain",null),n.setState({gameState:"bet",guide:"",result:"",betHand1:null,betHand2:null,playerHand1:[],playerHand2:[],playerValue1:null,playerValue2:null,playerCards1:[],playerCards2:[],handNum:0,dealerHand:[],dealerValue:null,dealerCards:[],turn:"me",activeHand:null,legalMoves:null,optimalMove:"",playerBasePos:[678,480],dealCards:[],hasSplit:!1,isDeal:!0}),g=0,y=0,f=0,v=null,b=null,E=null,N=null,S=null},n.highlightActiveHand=function(){if("me"===n.state.turn)if(0===n.state.handNum){var e,t=Object(o.a)(document.getElementsByClassName("hand1"));try{for(t.s();!(e=t.n()).done;){e.value.style.animationName="pulseHand"}}catch(i){t.e(i)}finally{t.f()}}else{var a,l=Object(o.a)(document.getElementsByClassName("hand2"));try{for(l.s();!(a=l.n()).done;){a.value.style.animationName="pulseHand"}}catch(i){l.e(i)}finally{l.f()}var s,r=Object(o.a)(document.getElementsByClassName("hand1"));try{for(r.s();!(s=r.n()).done;){s.value.style.animationName="show"}}catch(i){r.e(i)}finally{r.f()}}},n.highlightLegalMoves=function(){n.state.legalMoves.forEach((function(e){document.getElementsByClassName(e.toLowerCase())[0].style.animationName="pulseMoves"}))},n.showCurrentCardsPerm=function(){var e,t=Object(o.a)(document.getElementsByClassName("hand1Cards"));try{for(t.s();!(e=t.n()).done;){e.value.classList.add("cardsShown")}}catch(r){t.e(r)}finally{t.f()}var a,n=Object(o.a)(document.getElementsByClassName("hand2Cards"));try{for(n.s();!(a=n.n()).done;){a.value.classList.add("cardsShown")}}catch(r){n.e(r)}finally{n.f()}var l,s=Object(o.a)(document.getElementsByClassName("dealerCards"));try{for(s.s();!(l=s.n()).done;){l.value.classList.add("cardsShown")}}catch(r){s.e(r)}finally{s.f()}},n.cleanShownCards=function(){for(var e=document.getElementsByClassName("hand1Cards");e.length>0;)e[0].classList.remove("hand1Cards");for(var t=document.getElementsByClassName("hand2Cards");t.length>0;)t[0].classList.remove("hand2Cards");for(var a=document.getElementsByClassName("dealerCards");a.length>0;)a[0].classList.remove("dealerCards")},n.unhighlightHands=function(){if("me"===n.state.turn)if(0===n.state.handNum){var e,t=Object(o.a)(document.getElementsByClassName("hand1"));try{for(t.s();!(e=t.n()).done;){e.value.style.animationName="none"}}catch(i){t.e(i)}finally{t.f()}}else{var a,l=Object(o.a)(document.getElementsByClassName("hand2"));try{for(l.s();!(a=l.n()).done;){a.value.style.animationName="none"}}catch(i){l.e(i)}finally{l.f()}}else{var s,r=Object(o.a)(document.getElementsByClassName("dealerValue"));try{for(r.s();!(s=r.n()).done;){s.value.style.animationName="none"}}catch(i){r.e(i)}finally{r.f()}}},n.unhighlightHandsStand=function(){if("me"===n.state.turn)if(0===n.state.handNum){var e,t=Object(o.a)(document.getElementsByClassName("hand1"));try{for(t.s();!(e=t.n()).done;){var a=e.value;a.style.animationDelay="0s",a.style.animationName="show"}}catch(i){t.e(i)}finally{t.f()}}else{var l,s=Object(o.a)(document.getElementsByClassName("hand2"));try{for(s.s();!(l=s.n()).done;){var r=l.value;r.style.animationDelay="0s",r.style.animationName="show"}}catch(i){s.e(i)}finally{s.f()}}},n.unhighlightLegalMoves=function(){var e,t=Object(o.a)(document.getElementsByClassName("playButtonAnimation"));try{for(t.s();!(e=t.n()).done;){e.value.style.animationName="none"}}catch(a){t.e(a)}finally{t.f()}},n.state={gameState:"bet",guide:"",result:"",betHand1:null,betHand2:null,balance:100,playerHand1:[],playerHand2:[],playerValue1:null,playerValue2:null,dealerValue:null,playerCards1:[],playerCards2:[],handNum:0,dealerHand:[],dealerCards:[],turn:"me",prevBet:0,activeHand:null,legalMoves:null,optimalMove:"",dealerBasePos:[678,272],playerBasePos:[678,480],dealCards:[],hasSplit:!1,isDeal:!0},n}return Object(m.a)(a,[{key:"render",value:function(){var e=this,t=void 0,a=void 0,n="";parseInt(localStorage.getItem("highScore"))>100&&(n="High Score: $"+(Math.round(100*(parseInt(localStorage.getItem("highScore"))+1e-5))/100).toString());var s=this.state.dealCards.map((function(e,t){return e}));return"bet"===e.state.gameState?t=l.a.createElement(k,{placeBet:e.placeBet,balance:e.state.balance,prevBet:e.state.prevBet}):a=l.a.createElement(j,{playerHand1:e.state.playerHand1,playerHand2:e.state.playerHand2,playerCards1:e.state.playerCards1,playerCards2:e.state.playerCards2,playerValue1:e.state.playerValue1,playerValue2:e.state.playerValue2,dealerValue:e.state.dealerValue,betHand1:e.state.betHand1,betHand2:e.state.betHand2,balance:e.state.balance,dealerHand:e.state.dealerHand,dealerCards:e.state.dealerCards,optimalMove:e.state.optimalMove,playMove:e.playMove,result:e.state.result,playAgain:e.playAgain,gameState:e.state.gameState}),l.a.createElement("div",{className:"bgImg"},l.a.createElement("div",{className:"shoeImg"}),l.a.createElement("div",{className:"cardBackImgConstant"}),s,l.a.createElement("link",{rel:"stylesheet",href:"https://maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css"}),l.a.createElement("div",{className:"defStyle",style:{left:"35px",top:"100px"}}," ",l.a.createElement("a",{style:{color:"white"},target:"_blank",rel:"noopener noreferrer",href:"https://bicyclecards.com/how-to-play/blackjack/"},"Rules ",l.a.createElement("i",{className:"fa fa-external-link"}))),l.a.createElement("div",null,t),l.a.createElement("div",null,a),l.a.createElement("div",{className:"balance"},n,l.a.createElement("br",null),"Balance: $",this.state.balance))}},{key:"componentDidMount",value:function(){this.talkToPython("setup","me");try{localStorage.getItem("highScore")}catch(e){localStorage.setItem("highScore",100)}}}]),a}(l.a.Component),k=function(e){Object(p.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(d.a)(this,a),(n=t.call(this,e)).componentDidMount=function(){n.props.prevBet>n.props.balance&&n.setState({bet:0})},n.placeBet=function(e){0===e?n.setState({noBetAlert:"Can't bet nothing!"}):n.props.placeBet(e)},n.addChip=function(e){var t=parseInt(e.target.value),a=n.props.balance;n.state.bet+t>a?n.setState({maxBetReached:!0,noBetAlert:""}):n.setState((function(e){return{bet:e.bet+t,maxBetReached:!1,noBetAlert:""}}))},n.clearBets=function(){n.setState({bet:0,maxBetReached:!1,noBetAlert:""})},n.state={bet:n.props.prevBet,maxBetReached:!1,noBetAlert:""},n}return Object(m.a)(a,[{key:"render",value:function(){var e=this,t=[1,5,25,50,100].map((function(t,a){return l.a.createElement("button",{className:"defStyle",key:a,onClick:e.addChip,value:t,style:{position:"absolute",left:14+97*a,top:10,height:80,width:80,borderStyle:"none"}})})),a="";return this.state.maxBetReached&&(a="Insufficient balance!"),l.a.createElement("div",null,l.a.createElement("div",{className:"chips"},t),l.a.createElement("div",{className:"bettingGuide"},"Select chips, then place bet!"),l.a.createElement("div",{className:"currentBalance"},"Balance: $",this.props.balance),l.a.createElement("button",{className:"clearButton",onClick:this.clearBets},"Clear"),l.a.createElement("button",{className:"betButton",onClick:function(){return e.placeBet(e.state.bet)},autoFocus:!0},"Place Bet"),l.a.createElement("button",{className:"betAmount",onClick:this.clearBets},"$",this.state.bet),l.a.createElement("div",{className:"maxBetText"},a),l.a.createElement("div",{className:"maxBetText"},this.state.noBetAlert))}}]),a}(l.a.Component),j=function(e){Object(p.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(d.a)(this,a),(n=t.call(this,e)).componentDidMount=function(){document.getElementById("_checkbox").checked=!0},n.toggleOptCheckbox=function(){n.state.optimalChecked?document.getElementById("_checkbox").checked=!1:document.getElementById("_checkbox").checked=!0,n.setState((function(e){return{optimalChecked:!e.optimalChecked}}))},n.play=function(e){var t=e.target.name;n.props.playMove(t)},n.state={optimalChecked:!0},n}return Object(m.a)(a,[{key:"render",value:function(){var e=this,t=void 0,a=void 0;a=0===this.props.balance?l.a.createElement("button",{className:"playAgain playButton",onClick:function(){e.props.playAgain("game")}},"Restart Game"):l.a.createElement("button",{className:"playAgain playButton",onClick:function(){e.props.playAgain("round")},autoFocus:!0},"Deal Again");var n="";this.state.optimalChecked&&(n=l.a.createElement("div",{className:"optimalMove",style:{top:"755px",left:"815px"}},": ",this.props.optimalMove)),"results"===this.props.gameState&&(t=l.a.createElement("div",null,l.a.createElement("span",null,a),l.a.createElement("div",{className:"resultsBox"},this.props.result)));var s,r,o,i=void 0;return"play"===this.props.gameState&&(i=l.a.createElement("div",null,l.a.createElement("button",{className:"hit playButton playButtonAnimation",name:"Hit",onClick:this.play,autoFocus:!0},"Hit"),l.a.createElement("button",{className:"stand playButton playButtonAnimation",name:"Stand",onClick:this.play},"Stand"),l.a.createElement("button",{className:"double playButton playButtonAnimation",name:"Double",onClick:this.play},"Double"),l.a.createElement("button",{className:"split playButton playButtonAnimation",name:"Split",onClick:this.play},"Split"),l.a.createElement("div",{className:"optimalMove",style:{position:"absolute",top:"755px",left:"609px"}},"Show Optimal Move"),l.a.createElement("input",{type:"checkbox",id:"_checkbox",onClick:this.toggleOptCheckbox}),l.a.createElement("label",{htmlFor:"_checkbox"},l.a.createElement("div",{id:"tick_mark"})),n,l.a.createElement("div",{className:"guide"},"Choose to Hit, Stand, Double, or Split!"))),s=this.props.playerCards1.map((function(e){return e})),r=this.props.playerCards2.map((function(e){return e})),o=this.props.dealerCards.map((function(e){return e})),l.a.createElement("div",null,l.a.createElement("div",{className:"dealer"},this.props.dealerValue),l.a.createElement("div",null,this.props.playerValue1),l.a.createElement("div",null,this.props.playerValue2),l.a.createElement("div",null,this.props.betHand1),l.a.createElement("div",null,this.props.betHand2),l.a.createElement("div",{className:"defStyle",style:{position:"absolute",left:"550px",top:"320px"}},"Dealer"),l.a.createElement("div",{className:"defStyle handValue",style:{position:"absolute",left:"530px",top:"530px"}},"You"),t,l.a.createElement("div",{className:"dealer"},o),C,l.a.createElement("div",null,s),B,l.a.createElement("div",null,r),i)}}]),a}(l.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(l.a.createElement(l.a.StrictMode,null,l.a.createElement(x,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[13,1,2]]]);
//# sourceMappingURL=main.2f212728.chunk.js.map